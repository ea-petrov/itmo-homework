| Лабораторная работа №4    | M3136 | Архитектура ЭВМ |
| ------------------------- | ----------- | ---- |
| Кэш и кодирование команд  | Петров Егор Андреевич       | 2024 |

# Расчёт параметров системы

Полученные параметры системы

| Параметр         | Значение (с единицами измерения) |
| ---------------- | --- |
| MEM_SIZE         | 262144 байт |
| ADDR_LEN         | 18 бит |
| CACHE_WAY        | 4 |
| CACHE_TAG_LEN    | 8 бит |
| CACHE_INDEX_LEN  | 5 бит |
| CACHE_OFFSET_LEN | 5 бит |
| CACHE_SIZE       | 4 кб |
| CACHE_LINE_SIZE  | 32 байта |
| CACHE_LINE_COUNT | 128 |
| CACHE_SETS       | 32 |

Расчёт:

MEM_SIZE = 2 ** ADDR_LEN

CACHE_OFFSET_LEN = log2(CACHE_LINE_SIZE)

CACHE_INDEX_LEN = log2(CACHE_SETS)

CACHE_TAG_LEN = ADDR_LEN - CACHE_INDEX_LEN - CACHE_OFFSET_LEN

CACHE_LINE_COUNT = CACHE_WAY * CACHE_SETS

CACHE_SIZE = CACHE_LINE_COUNT * CACHE_LINE_SIZE

# Структура кеша (+кеш линия и кеш сет)
храню свою ячейку памяти MemoryCell[][][] в виде 3 мерного массива где находится кеш лайн и кеш сет
кеш лайн имеет 3 состояния удобно для симуляции write-back(тоесть если состояние MODIFIED то значит что значение в кеш линии было изменено следственно в RAM-е у нас старые данные)
Тег (tags[][]) используется для идентификации адреса памяти, который хранится в данной кэш-линии
с помощью get/set можем найти нужный для нас кеш сет
# Задача
92.30769%	87.50000% = 12/13 и 7/8 соответственно 
заполняем 4 кеш линии в 0 кеш сете и после этого снова обращаемся с тегом которого уже нету к 0 кеш сету,следственно, происходит вытеснение, и дальше просто корректируем хитрейт по инструкциям,
дальше ставим команды специально для даты и получаем наш ответ
